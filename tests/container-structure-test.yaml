schemaVersion: 2.0.0
commandTests:
  - name: "Python version"
    command: "python"
    args: ["--version"]
    expectedOutput: ["Python 3.9"]

  - name: "FastAPI installed"
    command: "pip"
    args: ["show", "fastapi"]
    expectedOutput: ["Name: fastapi"]

  - name: "Alembic installed"
    command: "which"
    args: ["alembic"]
    expectedOutput: ["/usr/local/bin/alembic"]

fileExistenceTests:
  - name: "App directory exists"
    path: "/app"
    shouldExist: true
    permissions: "drwxr-xr-x"

  - name: "Main application file"
    path: "/app/backend/app/main.py"
    shouldExist: true

  - name: "Requirements file"
    path: "/app/requirements.txt"
    shouldExist: true

  - name: "Alembic config"
    path: "/app/alembic.ini"
    shouldExist: true

fileContentTests:
  - name: "Health check endpoint"
    path: "/app/backend/app/main.py"
    expectedContents: ["@app.get(\"/health\")"]

metadataTest:
  exposedPorts: ["8000"]
  workdir: "/app"
  user: "1000"